<!DOCTYPE html>
<html lang=" en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>React New Activity Component — Hides Components Without Losing States | Tanadol Deachprapakorn</title>
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="React New Activity Component — Hides Components Without Losing States" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Introduction" />
<meta property="og:description" content="Introduction" />
<link rel="canonical" href="https://putawande.github.io/react-new-activity-component-hides-components-without-losing-states" />
<meta property="og:url" content="https://putawande.github.io/react-new-activity-component-hides-components-without-losing-states" />
<meta property="og:site_name" content="Tanadol Deachprapakorn" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-11-23T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="React New Activity Component — Hides Components Without Losing States" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-11-23T00:00:00+00:00","datePublished":"2025-11-23T00:00:00+00:00","description":"Introduction","headline":"React New Activity Component — Hides Components Without Losing States","mainEntityOfPage":{"@type":"WebPage","@id":"https://putawande.github.io/react-new-activity-component-hides-components-without-losing-states"},"url":"https://putawande.github.io/react-new-activity-component-hides-components-without-losing-states"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href=/assets/css/main.css>
  <link rel="stylesheet" href=/assets/css/syntax-base16.monokai.dark.css>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:ital,wght@0,400;0,700;1,400;1,700&display=swap"
    rel="stylesheet">
  <link
    href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible+Mono:ital,wght@0,200..800;1,200..800&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" type='text/css' href="https://cdn.jsdelivr.net/gh/devicons/devicon@latest/devicon.min.css" />
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=article,home,mail" /><link type="application/atom+xml" rel="alternate" href="https://putawande.github.io/feed.xml" title="Tanadol Deachprapakorn" /></head><div class="flex flex-col min-h-screen">
<body>

  <main id="content" class="flex-grow">
    <div class="p-5">
  <div class="max-w-screen-lg mx-auto">
    <div class="flex justify-end"><nav class="flex gap-4">
  
  <a href="/" class="text-cool-gray hover:text-ghost-white focus:text-ghost-white relative group outline-none">
    <span class="material-symbols-outlined text-[24px]">home</span>
    <span class="absolute -bottom-full left-1/2 -translate-x-1/2 px-2 py-1 text-sm rounded bg-gray-800 opacity-0 group-hover:opacity-100 group-focus:opacity-100 transition-opacity pointer-events-none">
      Home
    </span>
  </a>
  
  <a href="/blog" class="text-cool-gray hover:text-ghost-white focus:text-ghost-white relative group outline-none">
    <span class="material-symbols-outlined text-[24px]">article</span>
    <span class="absolute -bottom-full left-1/2 -translate-x-1/2 px-2 py-1 text-sm rounded bg-gray-800 opacity-0 group-hover:opacity-100 group-focus:opacity-100 transition-opacity pointer-events-none">
      Blog
    </span>
  </a>
  
</nav></div>

    <article class="space-y-4 sm:space-y-8 my-8" itemscope itemtype="http://schema.org/BlogPosting">

      <header class="flex gap-4 sm:gap-8 flex-col items-center text-center">
        <p class="space-x-2 sm:text-lg">
          <time class="dt-published" datetime="2025-11-23T00:00:00+00:00" itemprop="datePublished">
            Nov 23rd, 2025
          </time>
          <span>·</span>
          <span class="text-cool-gray" itemprop="timeRequired">5 min read</span>
        </p>
<h1 class="text-3xl sm:text-4xl" itemprop="name headline">React New Activity Component — Hides Components Without Losing States</h1>
        <p class="text-lg sm:text-xl text-cool-gray code">Web Development, React</p>
      </header>

      <div class="markdown-body" itemprop="articleBody">
        <h2 id="introduction">Introduction</h2>

<p>Usually, when we want to hide our components in React we use conditional rendering, or css <code class="language-plaintext highlighter-rouge">display: none</code>. If we use conditional rendering, the states will be lost when it is hidden because the component will unmount. React 18 introduces <code class="language-plaintext highlighter-rouge">&lt;Activity&gt;</code> component, a new feature designed to manage the visibility, especially for elements that are frequently toggled.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nf">App</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">visible</span><span class="p">,</span> <span class="nx">setVisible</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span>

  <span class="k">return </span><span class="p">(</span>
    <span class="p">{</span><span class="cm">/* Conditional Rendering*/</span><span class="p">}</span>
    <span class="p">{</span><span class="nx">visible</span> <span class="o">&amp;&amp;</span> <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Content<span class="p">&lt;/&gt;}</span>
    <span class="p">{</span><span class="cm">/* or CSS Styling */</span><span class="p">}</span>
    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">style</span><span class="p">=</span><span class="si">{</span><span class="p">{</span><span class="na">display</span><span class="p">:</span> <span class="nx">visible</span> <span class="p">?</span> <span class="dl">'</span><span class="s1">block</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">none</span><span class="dl">'</span><span class="p">}</span><span class="si">}</span><span class="p">&gt;</span>
      Content
    <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
  <span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="how-it-works">How It Works?</h2>

<p>The <code class="language-plaintext highlighter-rouge">&lt;Activity&gt;</code> component allows you to manage the visibility of its children by using the <code class="language-plaintext highlighter-rouge">mode</code> prop.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;</span><span class="nc">Activity</span> <span class="na">mode</span><span class="p">=</span><span class="si">{</span><span class="nx">isShowingSidebar</span> <span class="p">?</span> <span class="dl">'</span><span class="s1">visible</span><span class="dl">'</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">hidden</span><span class="dl">'</span><span class="si">}</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nc">Sidebar</span> <span class="p">/&gt;</span>
<span class="p">&lt;/</span><span class="nc">Activity</span><span class="p">&gt;</span>
</code></pre></div></div>

<p>In my opinion, this is cleaner than conditional rendering, or conditional CSS styling.</p>

<ul>
  <li>When <code class="language-plaintext highlighter-rouge">mode='hidden'</code>, React hides the component by applying <code class="language-plaintext highlighter-rouge">display: "none"</code> on CSS.</li>
  <li>It will also destroys their Effects and clean up any subscriptions.</li>
  <li>But the children will still re-render at a lower priority, if there are new props.</li>
  <li>When the mode changes to visible again, React will re-create the Effects and restore their previous states.</li>
</ul>

<h2 id="benefits">Benefits</h2>

<h3 id="state-preservation">State Preservation</h3>

<p>If we use conditional rendering, the state is lost when the component unmounts. We can fix this by moving the state to the parent component. But this breaks encapsulation. It would be better if the state is kept inside the component. The new <code class="language-plaintext highlighter-rouge">&lt;Activity&gt;</code> component enables us to do this.</p>

<h3 id="dom-state-preservation">DOM State Preservation</h3>

<p>Because React applies <code class="language-plaintext highlighter-rouge">display: "none"</code> on CSS, the state of the DOM is preserved. Example, the user’s input is not lost when the component unmounts.</p>

<h3 id="pre-rendering-content">Pre-Rendering Content</h3>

<p>The content that will become visible later, is pre-rendered. Because React renders the children at a lower priority when the mode is hidden.</p>

<h3 id="speeding-up-page-interaction-on-load-for-ssr">Speeding Up Page Interaction On Load for SSR</h3>

<p>React uses Selective Hydration under-the-hood. It works by hydrating your app’s HTML in chunks, allowing early interactions on some components even-though your whole code is not yet finished loading.</p>

<div class="language-tsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">type</span> <span class="nx">Tab</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Home</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">HeavyComponent</span><span class="dl">'</span>

<span class="kd">function</span> <span class="nf">Page</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">selected</span><span class="p">,</span> <span class="nx">setSelected</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="o">&lt;</span><span class="nx">Tab</span><span class="o">&gt;</span><span class="p">(</span><span class="dl">'</span><span class="s1">Home</span><span class="dl">'</span><span class="p">)</span>

  <span class="k">return </span><span class="p">(</span>
    <span class="p">&lt;&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">'tab-menu'</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="nf">setSelected</span><span class="p">(</span><span class="dl">'</span><span class="s1">Home</span><span class="dl">'</span><span class="p">)</span><span class="si">}</span><span class="p">&gt;</span>
          Home
        <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="nf">setSelected</span><span class="p">(</span><span class="dl">'</span><span class="s1">HeavyComponent</span><span class="dl">'</span><span class="p">)</span><span class="si">}</span><span class="p">&gt;</span>
          HeavyComponent
        <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

      <span class="si">{</span><span class="nx">selected</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">Home</span><span class="dl">'</span> <span class="o">&amp;&amp;</span> <span class="p">&lt;</span><span class="nc">Home</span> <span class="p">/&gt;</span><span class="si">}</span>
      <span class="si">{</span><span class="nx">selected</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">HeavyComponent</span><span class="dl">'</span> <span class="o">&amp;&amp;</span> <span class="p">&lt;</span><span class="nc">HeavyComponent</span> <span class="p">/&gt;</span><span class="si">}</span>
    <span class="p">&lt;/&gt;</span>
  <span class="p">)</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">App</span>
</code></pre></div></div>

<p>If we use conditional rendering, React doesn’t utilize Selective Hydration to separate our components into different chunks. It must hydrate the whole page which could lead to unresponsive tab buttons.</p>

<div class="language-tsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">type</span> <span class="nx">Tab</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Home</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">HeavyComponent</span><span class="dl">'</span>

<span class="kd">function</span> <span class="nf">Page</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">selected</span><span class="p">,</span> <span class="nx">setSelected</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="o">&lt;</span><span class="nx">Tab</span><span class="o">&gt;</span><span class="p">(</span><span class="dl">'</span><span class="s1">Home</span><span class="dl">'</span><span class="p">)</span>

  <span class="k">return </span><span class="p">(</span>
    <span class="p">&lt;&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">'tab-menu'</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="nf">setSelected</span><span class="p">(</span><span class="dl">'</span><span class="s1">Home</span><span class="dl">'</span><span class="p">)</span><span class="si">}</span><span class="p">&gt;</span>
          Home
        <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="nf">setSelected</span><span class="p">(</span><span class="dl">'</span><span class="s1">HeavyComponent</span><span class="dl">'</span><span class="p">)</span><span class="si">}</span><span class="p">&gt;</span>
          HeavyComponent
        <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

      <span class="p">&lt;</span><span class="nc">Activity</span> <span class="na">mode</span><span class="p">=</span><span class="si">{</span><span class="nx">selected</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">Home</span><span class="dl">'</span> <span class="p">?</span> <span class="dl">'</span><span class="s1">visible</span><span class="dl">'</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">hidden</span><span class="dl">'</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Home</span> <span class="p">/&gt;</span>
      <span class="p">&lt;/</span><span class="nc">Activity</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nc">Activity</span> <span class="na">mode</span><span class="p">=</span><span class="si">{</span><span class="nx">selected</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">HeavyComponent</span><span class="dl">'</span> <span class="p">?</span> <span class="dl">'</span><span class="s1">visible</span><span class="dl">'</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">hidden</span><span class="dl">'</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">HeavyComponent</span> <span class="p">/&gt;</span>
      <span class="p">&lt;/</span><span class="nc">Activity</span><span class="p">&gt;</span>
    <span class="p">&lt;/&gt;</span>
  <span class="p">)</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">App</span>
</code></pre></div></div>

<p>This way React can separately hydrate tab menu, home and heavy component. The tab menu could be interactable first before the heavy component finishes loading.</p>

<h2 id="demo">Demo</h2>

<iframe src="https://codesandbox.io/p/github/PutawanDE/react-activity-demo/main?import=true&amp;embed=1&amp;file=%2Fsrc%2FApp.tsx" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"></iframe>

<h2 id="when-not-to-use">When Not to Use</h2>

<ul>
  <li>
<strong>Permanent removal:</strong> This is obvious. If we want to remove it completely why should it linger in memory?</li>
  <li>
<strong>When the component changes frequently and performance is critical:</strong> Although it re-renders at a lower priority, it still consumes resources.</li>
  <li>
<strong>When the component’s effect should always run when visible, regardless of previous state:</strong> If you want to run the effects from a “fresh” state, you might prefer a full unmount and remount.</li>
</ul>

<h2 id="references-and-further-readings">References and Further Readings</h2>

<ul>
  <li><a href="https://react.dev/reference/react/Activity" target="_blank" rel="noopener noreferrer">Activity Api Reference - React</a></li>
</ul>

      </div>
    </article>
  </div>
</div>
  </main>


</body><footer class="px-5">
  <div
    class="max-w-screen-lg mx-auto border-t-2 border-ghost-white py-5 flex justify-between items-center flex-wrap gap-5 text-sm ">
    <p>© 2025. Tanadol Deachprapakorn</p>
    <div class="flex items-center gap-5">
      <b>Hire me</b>
      <a href="mailto:tanadol-de@outlook.com""><span
          class=" material-symbols-outlined !text-[24px] pt-1">
        mail
        </span>
      </a>
      <a href=https://github.com/PutawanDE target="_blank" rel="noopener noreferrer"><i
          class="devicon-github-original !text-[24px]"></i>
      </a>
      <a href=https://www.linkedin.com/in/tanadol-deachprapakorn-510299112/ target="_blank" rel="noopener noreferrer"><i
          class="devicon-linkedin-plain !text-[24px]"></i></a>
    </div>
  </div>
</footer></div>

</html>